---
title: Getting started
---

## Installation

To install `wuchale`, you have to install the base package and the [adapter(s)](/concepts/adapters)
you want to use. The adapter for vanilla JS/TS projects is built into the base
package. For other projects, the adapter has to be installed. Currently, only
the Svelte adapter is available.

This installation guide assumes that you have your source files under `src`. If
not, you will have to configure the adapter and provide the `files`.

import { Steps, Tabs, TabItem } from '@astrojs/starlight/components';

<Steps>

1. **Install**

    <Tabs syncKey="adapter">
        <TabItem label="Svelte">
            ```bash
            npm install wuchale @wuchale/svelte
            ```
        </TabItem>
        <TabItem label="Vanilla">
            ```bash
            npm install wuchale
            ```
        </TabItem>
    </Tabs>

2. **Configure Vite**

    <Tabs syncKey="adapter">
        <TabItem label="Svelte">
            ```javascript
            // vite.config.js
            import { svelte } from '@sveltejs/vite-plugin-svelte'
            import { wuchale } from 'wuchale'
            
            export default {
                plugins: [
                    wuchale(),
                    svelte(),
                ]
            }
            ```
        </TabItem>
        <TabItem label="Vanilla">
            ```javascript
            // vite.config.js
            import {wuchale} from 'wuchale'

            export default {
                plugins: [wuchale()]
            }
            ```
        </TabItem>
    </Tabs>

3. **Create Configuration**

    <Tabs syncKey="adapter">
        <TabItem label="Svelte">
            ```javascript
            // wuchale.config.js
            // @ts-check
            import { adapter as svelte } from "@wuchale/svelte"
            import { defineConfig } from "wuchale"

            export default defineConfig({
                locales: {
                    // English included by default
                    es: {name: 'Español'},
                },
                adapters: {
                    main: svelte(),
                }
            })
            ```
        </TabItem>
        <TabItem label="Vanilla">
            ```javascript
            // wuchale.config.js
            // @ts-check
            import { adapter as basic } from 'wuchale/adapter-vanilla'
            import { defineConfig } from 'wuchale'

            export default defineConfig({
                locales: {
                    // English included by default
                    es: {name: 'Español'},
                },
                adapters: {
                    main: basic()
                }
            })
            ```
        </TabItem>
    </Tabs>

4. **Initialize locales**

    ```bash
    npx wuchale init
    ```

    This command:

    - Creates the locales directory if it doesn't exist
    - Creates the loader file if it doesn't exist
    - If the loader didn't exist before, it scans the source files and extracts the texts as a first time scan

5. Setup in Your App

    Now that the loader file is created, you can edit it, export the things you
    need from there, and setup how the translations are loaded.

    <Tabs syncKey="adapter">
        <TabItem label="Svelte">
            <Tabs>
                <TabItem label="Svelte">
                    ```svelte
                    <!-- src/App.svelte -->
                    <script>
                        import { loadLocale } from 'wuchale/run-client'
                        
                        let locale = $state('en')
                    </script>

                    {#await loadLocale(locale)}
                        <!-- @wc-ignore -->
                        Loading translations...
                    {:then}
                        <!-- Your app content -->
                    {/await}
                    ```
                </TabItem>
                <TabItem label="SvelteKit">
                    Assuming the use of a search parameter for the locale state: `?locale=en`. But you can use anything else.
                    ```javascript
                    // src/routes/+layout.js
                    import { locales } from 'virtual:wuchale/locales'
                    import { loadCatalogs } from 'wuchale/run-client'
                    import { loadIDs, loadCatalog } from '../locales/loader.svelte.js'

                    /** @type import('./$types').LayoutLoad */
                    export async function load({url}) {
                        const locale = url.searchParams.get('locale') ?? 'en'
                        if (!(locale in locales)) {
                            return
                        }
                        return {
                            locale,
                            catalogs: await loadCatalogs(locale, loadIDs, loadCatalog)
                        }
                    }
                    ```
                </TabItem>
            </Tabs>
        </TabItem>
        <TabItem label="Vanilla">
            ```javascript
            import { loadLocale } from 'wuchale/run-client'
            await loadLocale(locale)
            ```
        </TabItem>
    </Tabs>

6. Start Coding!

    Write your Svelte components naturally. `wuchale` will extract and compile
    translations automatically:

    <Tabs syncKey="adapter">
        <TabItem label="Svelte">
            ```svelte
            <p>Hello world</p>
            ```
        </TabItem>
        <TabItem label="Vanilla">
            ```javascript
            const showMsg = (element) => {
                element.innerHTML = 'Hello world'
            }
            ```
        </TabItem>
    </Tabs>

</Steps>

For full usage examples, look inside the **<a
    href="https://github.com/wuchalejs/examples" target="_blank">examples
    repository</a>**. It contains examples for different usage patterns.

## Workflow

`wuchale`'s workflow is inspired by [Lingui](https://lingui.dev/). It follows
similar steps but it does most of the steps automatically.

<Tabs>
    <TabItem label="With Vite">
        <Steps>

        1. You write your code
        1. `wuchale` auto extracts the texts into the catalog files

            During this step, if configured, [Gemini](/guides/gemini) does the automatic translation

        1. The translator translates the texts by editing the extracted `.po` files
        1. `wuchale` picks up the changes and updates the UI [during dev](/guides/hmr)
        1. When you do the production build, `wuchale` auto compiles the catalogs and passes them to Vite to be included in the final build.

        </Steps>
    </TabItem>
    <TabItem label="Without Vite">
        <Steps>

        1. You write your code
        1. You invoke the CLI command `wuchale extract` to extract the texts into the catalog files

            During this step, if configured, [Gemini](/guides/gemini) does the automatic translation

        1. The translator translates the texts by editing the extracted `.po` files
        1. You invoke the CLI command `wuchale extract` again to compile the translated texts and write them to disk
        1. When you run the app, everything works.

        </Steps>
    </TabItem>
</Tabs>

[Learn about how it works](/concepts/howitworks).

## What gets extracted

There are three possible places for a user-facing text to be in:

- **Markup**: inside HTML tags like `<p>text</p>`
- **Attribute**: insite element attributes like `<span title="Text"></span>`
- **Script**: strings inside JavaScript code

Inside of these, which texts exactly are extracted is decided by the adapter in
use, because not all text should be extracted as user facing text. Some
attributes and strings are not meant to be seen by the user.

The adapter uses a [configurable heuristic
function](/reference/adapter-common#heuristic) to make these decisions. This
function receives the text along with other details about the text and can
decide whether to extract it or not.
